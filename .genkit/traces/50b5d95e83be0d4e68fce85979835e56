{"traceId":"50b5d95e83be0d4e68fce85979835e56","displayName":"action-execution","startTime":1757865409890.71,"endTime":1757865416172.7727,"spans":{"957ecbf5a8a7ff1c":{"spanId":"957ecbf5a8a7ff1c","traceId":"50b5d95e83be0d4e68fce85979835e56","parentSpanId":"c6975b47f16db4c0","startTime":1757865409891.248,"endTime":1757865409914.2498,"attributes":{"genkit:input":"{\"userQuery\":\"Find flight between tokyo and london with hotels\"}","genkit:metadata:subtype":"executable-prompt","genkit:name":"travelAgentPrompt","genkit:output":"{\"messages\":[{\"content\":[{\"text\":\"You are a professional and courteous travel agent assistant.\\n\\t\\t\\tYou have access to the following tools:\\n\\t\\t\\t- searchFlights: to find flights between two cities.\\n\\t\\t\\t- suggestHotel: to recommend a hotel in a specific city.\\n\\n\\t\\t\\tYour goal is to fulfill the user's travel request by intelligently using the tools at your disposal.\\n\\n\\t\\t\\t- If the user asks for a flight, use the searchFlights tool.\\n\\t\\t\\t- If the user asks for a hotel, use the suggestHotel tool.\\n\\t\\t\\t- If the user asks for both, you should call both tools sequentially or in parallel as needed.\\n\\t\\t\\t- If you are missing any information (e.g., a city or destination), you MUST ask the user for it.\\n\\t\\t\\t- If the user's request is not related to travel, respond politely that you can only help with travel-related queries.\"}],\"role\":\"system\"},{\"content\":[{\"text\":\"The user's request is: Find flight between tokyo and london with hotels\"}],\"role\":\"user\"}],\"output\":{\"constrained\":true},\"tools\":[\"searchFlights\",\"suggestHotel\"]}","genkit:path":"/{travelAgent,t:flow}/{travelAgentPrompt,t:action,s:executable-prompt}","genkit:state":"success","genkit:type":"action"},"displayName":"travelAgentPrompt","instrumentationLibrary":{"name":"genkit-tracer","version":"v1"},"spanKind":"INTERNAL","sameProcessAsParentSpan":{"value":true},"status":{"code":0},"timeEvents":{}},"52637c5cf201773e":{"spanId":"52637c5cf201773e","traceId":"50b5d95e83be0d4e68fce85979835e56","parentSpanId":"bdb10bba30c5fd40","startTime":1757865409951.9402,"endTime":1757865413670.7842,"attributes":{"http.request.method":"POST","http.response.status_code":200,"network.protocol.version":"1.1","server.address":"generativelanguage.googleapis.com","url.full":"https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent"},"displayName":"HTTP POST","instrumentationLibrary":{"name":"go.opentelemetry.io/contrib/instrumentation/net/http/otelhttp","version":"0.61.0"},"spanKind":"CLIENT","sameProcessAsParentSpan":{"value":true},"status":{"code":0},"timeEvents":{}},"bdb10bba30c5fd40":{"spanId":"bdb10bba30c5fd40","traceId":"50b5d95e83be0d4e68fce85979835e56","parentSpanId":"c6975b47f16db4c0","startTime":1757865409942.119,"endTime":1757865413687.1533,"attributes":{"genkit:input":"{\"messages\":[{\"content\":[{\"text\":\"You are a professional and courteous travel agent assistant.\\n\\t\\t\\tYou have access to the following tools:\\n\\t\\t\\t- searchFlights: to find flights between two cities.\\n\\t\\t\\t- suggestHotel: to recommend a hotel in a specific city.\\n\\n\\t\\t\\tYour goal is to fulfill the user's travel request by intelligently using the tools at your disposal.\\n\\n\\t\\t\\t- If the user asks for a flight, use the searchFlights tool.\\n\\t\\t\\t- If the user asks for a hotel, use the suggestHotel tool.\\n\\t\\t\\t- If the user asks for both, you should call both tools sequentially or in parallel as needed.\\n\\t\\t\\t- If you are missing any information (e.g., a city or destination), you MUST ask the user for it.\\n\\t\\t\\t- If the user's request is not related to travel, respond politely that you can only help with travel-related queries.\"}],\"role\":\"system\"},{\"content\":[{\"text\":\"The user's request is: Find flight between tokyo and london with hotels\"}],\"role\":\"user\"}],\"output\":{\"contentType\":\"text/plain\"},\"tools\":[{\"description\":\"Searches for flights between a departure and arrival city.\",\"inputSchema\":{\"additionalProperties\":false,\"properties\":{\"arrival\":{\"type\":\"string\"},\"departure\":{\"type\":\"string\"}},\"required\":[\"departure\",\"arrival\"],\"type\":\"object\"},\"name\":\"searchFlights\",\"outputSchema\":{\"type\":\"string\"}},{\"description\":\"Suggests a popular and well-rated hotel in a given destination.\",\"inputSchema\":{\"additionalProperties\":false,\"properties\":{\"destination\":{\"type\":\"string\"}},\"required\":[\"destination\"],\"type\":\"object\"},\"name\":\"suggestHotel\",\"outputSchema\":{\"type\":\"string\"}}]}","genkit:metadata:subtype":"model","genkit:name":"googleai/gemini-2.5-flash","genkit:output":"{\"finishReason\":\"stop\",\"latencyMs\":3735.392,\"message\":{\"content\":[{\"toolRequest\":{\"input\":{\"arrival\":\"london\",\"departure\":\"tokyo\"},\"name\":\"searchFlights\"}},{\"toolRequest\":{\"input\":{\"destination\":\"london\"},\"name\":\"suggestHotel\"}}],\"role\":\"model\"},\"request\":{\"messages\":[{\"content\":[{\"text\":\"You are a professional and courteous travel agent assistant.\\n\\t\\t\\tYou have access to the following tools:\\n\\t\\t\\t- searchFlights: to find flights between two cities.\\n\\t\\t\\t- suggestHotel: to recommend a hotel in a specific city.\\n\\n\\t\\t\\tYour goal is to fulfill the user's travel request by intelligently using the tools at your disposal.\\n\\n\\t\\t\\t- If the user asks for a flight, use the searchFlights tool.\\n\\t\\t\\t- If the user asks for a hotel, use the suggestHotel tool.\\n\\t\\t\\t- If the user asks for both, you should call both tools sequentially or in parallel as needed.\\n\\t\\t\\t- If you are missing any information (e.g., a city or destination), you MUST ask the user for it.\\n\\t\\t\\t- If the user's request is not related to travel, respond politely that you can only help with travel-related queries.\"}],\"role\":\"system\"},{\"content\":[{\"text\":\"The user's request is: Find flight between tokyo and london with hotels\"}],\"role\":\"user\"}],\"output\":{\"contentType\":\"text/plain\"},\"tools\":[{\"description\":\"Searches for flights between a departure and arrival city.\",\"inputSchema\":{\"additionalProperties\":false,\"properties\":{\"arrival\":{\"type\":\"string\"},\"departure\":{\"type\":\"string\"}},\"required\":[\"departure\",\"arrival\"],\"type\":\"object\"},\"name\":\"searchFlights\",\"outputSchema\":{\"type\":\"string\"}},{\"description\":\"Suggests a popular and well-rated hotel in a given destination.\",\"inputSchema\":{\"additionalProperties\":false,\"properties\":{\"destination\":{\"type\":\"string\"}},\"required\":[\"destination\"],\"type\":\"object\"},\"name\":\"suggestHotel\",\"outputSchema\":{\"type\":\"string\"}}]},\"usage\":{\"inputCharacters\":843,\"inputTokens\":297,\"outputTokens\":34,\"thoughtsTokens\":111,\"totalTokens\":442}}","genkit:path":"/{travelAgent,t:flow}/{googleai/gemini-2.5-flash,t:action,s:model}","genkit:state":"success","genkit:type":"action"},"displayName":"googleai/gemini-2.5-flash","instrumentationLibrary":{"name":"genkit-tracer","version":"v1"},"spanKind":"INTERNAL","sameProcessAsParentSpan":{"value":true},"status":{"code":0},"timeEvents":{}},"0da0467306062342":{"spanId":"0da0467306062342","traceId":"50b5d95e83be0d4e68fce85979835e56","parentSpanId":"c6975b47f16db4c0","startTime":1757865413694.932,"endTime":1757865413695.0583,"attributes":{"genkit:input":"{\"destination\":\"london\"}","genkit:metadata:subtype":"tool","genkit:name":"suggestHotel","genkit:output":"\"The Savoy is a highly-rated luxury hotel with excellent reviews.\"","genkit:path":"/{travelAgent,t:flow}/{suggestHotel,t:action,s:tool}","genkit:state":"success","genkit:type":"action"},"displayName":"suggestHotel","instrumentationLibrary":{"name":"genkit-tracer","version":"v1"},"spanKind":"INTERNAL","sameProcessAsParentSpan":{"value":true},"status":{"code":0},"timeEvents":{}},"92262e6a5d86a6ca":{"spanId":"92262e6a5d86a6ca","traceId":"50b5d95e83be0d4e68fce85979835e56","parentSpanId":"c6975b47f16db4c0","startTime":1757865413695.0579,"endTime":1757865413695.1301,"attributes":{"genkit:input":"{\"departure\":\"tokyo\",\"arrival\":\"london\"}","genkit:metadata:subtype":"tool","genkit:name":"searchFlights","genkit:output":"\"Found flights from tokyo to london. A non-stop flight is available for $550.\"","genkit:path":"/{travelAgent,t:flow}/{searchFlights,t:action,s:tool}","genkit:state":"success","genkit:type":"action"},"displayName":"searchFlights","instrumentationLibrary":{"name":"genkit-tracer","version":"v1"},"spanKind":"INTERNAL","sameProcessAsParentSpan":{"value":true},"status":{"code":0},"timeEvents":{}},"78e58ff13c933f50":{"spanId":"78e58ff13c933f50","traceId":"50b5d95e83be0d4e68fce85979835e56","parentSpanId":"039634fd03a88512","startTime":1757865413701.028,"endTime":1757865416156.1685,"attributes":{"http.request.method":"POST","http.response.status_code":200,"network.protocol.version":"1.1","server.address":"generativelanguage.googleapis.com","url.full":"https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent"},"displayName":"HTTP POST","instrumentationLibrary":{"name":"go.opentelemetry.io/contrib/instrumentation/net/http/otelhttp","version":"0.61.0"},"spanKind":"CLIENT","sameProcessAsParentSpan":{"value":true},"status":{"code":0},"timeEvents":{}},"039634fd03a88512":{"spanId":"039634fd03a88512","traceId":"50b5d95e83be0d4e68fce85979835e56","parentSpanId":"c6975b47f16db4c0","startTime":1757865413700.105,"endTime":1757865416164.4458,"attributes":{"genkit:input":"{\"messages\":[{\"content\":[{\"text\":\"You are a professional and courteous travel agent assistant.\\n\\t\\t\\tYou have access to the following tools:\\n\\t\\t\\t- searchFlights: to find flights between two cities.\\n\\t\\t\\t- suggestHotel: to recommend a hotel in a specific city.\\n\\n\\t\\t\\tYour goal is to fulfill the user's travel request by intelligently using the tools at your disposal.\\n\\n\\t\\t\\t- If the user asks for a flight, use the searchFlights tool.\\n\\t\\t\\t- If the user asks for a hotel, use the suggestHotel tool.\\n\\t\\t\\t- If the user asks for both, you should call both tools sequentially or in parallel as needed.\\n\\t\\t\\t- If you are missing any information (e.g., a city or destination), you MUST ask the user for it.\\n\\t\\t\\t- If the user's request is not related to travel, respond politely that you can only help with travel-related queries.\"}],\"role\":\"system\"},{\"content\":[{\"text\":\"The user's request is: Find flight between tokyo and london with hotels\"}],\"role\":\"user\"},{\"content\":[{\"toolRequest\":{\"input\":{\"arrival\":\"london\",\"departure\":\"tokyo\"},\"name\":\"searchFlights\"}},{\"toolRequest\":{\"input\":{\"destination\":\"london\"},\"name\":\"suggestHotel\"}}],\"role\":\"model\"},{\"content\":[{\"toolResponse\":{\"name\":\"suggestHotel\",\"output\":\"The Savoy is a highly-rated luxury hotel with excellent reviews.\"}},{\"toolResponse\":{\"name\":\"searchFlights\",\"output\":\"Found flights from tokyo to london. A non-stop flight is available for $550.\"}}],\"role\":\"tool\"}],\"output\":{\"contentType\":\"text/plain\"},\"tools\":[{\"description\":\"Searches for flights between a departure and arrival city.\",\"inputSchema\":{\"additionalProperties\":false,\"properties\":{\"arrival\":{\"type\":\"string\"},\"departure\":{\"type\":\"string\"}},\"required\":[\"departure\",\"arrival\"],\"type\":\"object\"},\"name\":\"searchFlights\",\"outputSchema\":{\"type\":\"string\"}},{\"description\":\"Suggests a popular and well-rated hotel in a given destination.\",\"inputSchema\":{\"additionalProperties\":false,\"properties\":{\"destination\":{\"type\":\"string\"}},\"required\":[\"destination\"],\"type\":\"object\"},\"name\":\"suggestHotel\",\"outputSchema\":{\"type\":\"string\"}}]}","genkit:metadata:subtype":"model","genkit:name":"googleai/gemini-2.5-flash","genkit:output":"{\"finishReason\":\"stop\",\"latencyMs\":2459.376791,\"message\":{\"content\":[{\"text\":\"I found a non-stop flight from Tokyo to London for $550. Also, I recommend The Savoy in London, a highly-rated luxury hotel with excellent reviews.\\n\"}],\"role\":\"model\"},\"request\":{\"messages\":[{\"content\":[{\"text\":\"You are a professional and courteous travel agent assistant.\\n\\t\\t\\tYou have access to the following tools:\\n\\t\\t\\t- searchFlights: to find flights between two cities.\\n\\t\\t\\t- suggestHotel: to recommend a hotel in a specific city.\\n\\n\\t\\t\\tYour goal is to fulfill the user's travel request by intelligently using the tools at your disposal.\\n\\n\\t\\t\\t- If the user asks for a flight, use the searchFlights tool.\\n\\t\\t\\t- If the user asks for a hotel, use the suggestHotel tool.\\n\\t\\t\\t- If the user asks for both, you should call both tools sequentially or in parallel as needed.\\n\\t\\t\\t- If you are missing any information (e.g., a city or destination), you MUST ask the user for it.\\n\\t\\t\\t- If the user's request is not related to travel, respond politely that you can only help with travel-related queries.\"}],\"role\":\"system\"},{\"content\":[{\"text\":\"The user's request is: Find flight between tokyo and london with hotels\"}],\"role\":\"user\"},{\"content\":[{\"toolRequest\":{\"input\":{\"arrival\":\"london\",\"departure\":\"tokyo\"},\"name\":\"searchFlights\"}},{\"toolRequest\":{\"input\":{\"destination\":\"london\"},\"name\":\"suggestHotel\"}}],\"role\":\"model\"},{\"content\":[{\"toolResponse\":{\"name\":\"suggestHotel\",\"output\":\"The Savoy is a highly-rated luxury hotel with excellent reviews.\"}},{\"toolResponse\":{\"name\":\"searchFlights\",\"output\":\"Found flights from tokyo to london. A non-stop flight is available for $550.\"}}],\"role\":\"tool\"}],\"output\":{\"contentType\":\"text/plain\"},\"tools\":[{\"description\":\"Searches for flights between a departure and arrival city.\",\"inputSchema\":{\"additionalProperties\":false,\"properties\":{\"arrival\":{\"type\":\"string\"},\"departure\":{\"type\":\"string\"}},\"required\":[\"departure\",\"arrival\"],\"type\":\"object\"},\"name\":\"searchFlights\",\"outputSchema\":{\"type\":\"string\"}},{\"description\":\"Suggests a popular and well-rated hotel in a given destination.\",\"inputSchema\":{\"additionalProperties\":false,\"properties\":{\"destination\":{\"type\":\"string\"}},\"required\":[\"destination\"],\"type\":\"object\"},\"name\":\"suggestHotel\",\"outputSchema\":{\"type\":\"string\"}}]},\"usage\":{\"inputCharacters\":843,\"inputTokens\":401,\"outputCharacters\":148,\"outputTokens\":36,\"totalTokens\":437}}","genkit:path":"/{travelAgent,t:flow}/{googleai/gemini-2.5-flash,t:action,s:model}","genkit:state":"success","genkit:type":"action"},"displayName":"googleai/gemini-2.5-flash","instrumentationLibrary":{"name":"genkit-tracer","version":"v1"},"spanKind":"INTERNAL","sameProcessAsParentSpan":{"value":true},"status":{"code":0},"timeEvents":{}},"c6975b47f16db4c0":{"spanId":"c6975b47f16db4c0","traceId":"50b5d95e83be0d4e68fce85979835e56","parentSpanId":"5f98fdaacccf008c","startTime":1757865409891.155,"endTime":1757865416168.4187,"attributes":{"genkit:input":"{\"userQuery\":\"Find flight between tokyo and london with hotels\"}","genkit:isRoot":true,"genkit:metadata:subtype":"flow","genkit:name":"travelAgent","genkit:output":"\"I found a non-stop flight from Tokyo to London for $550. Also, I recommend The Savoy in London, a highly-rated luxury hotel with excellent reviews.\\n\"","genkit:path":"/{travelAgent,t:flow}","genkit:state":"success","genkit:type":"action"},"displayName":"travelAgent","instrumentationLibrary":{"name":"genkit-tracer","version":"v1"},"spanKind":"INTERNAL","sameProcessAsParentSpan":{"value":true},"status":{"code":0},"timeEvents":{}},"5f98fdaacccf008c":{"spanId":"5f98fdaacccf008c","traceId":"50b5d95e83be0d4e68fce85979835e56","startTime":1757865409890.71,"endTime":1757865416172.7727,"attributes":{},"displayName":"action-execution","instrumentationLibrary":{"name":"genkit-tracer","version":"v1"},"spanKind":"INTERNAL","sameProcessAsParentSpan":{"value":true},"status":{"code":0},"timeEvents":{}}}}